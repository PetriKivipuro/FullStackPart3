(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(1),a=t(15),r=t.n(a),u=t(3),s=function(e){var n=e.persons,t=e.newFilter,c=e.removeInformation,a=""===t?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(o.jsx)("div",{children:a.map((function(e){return Object(o.jsxs)("div",{children:[" ",e.name,", ",e.number," ",Object(o.jsx)("button",{onClick:function(){return c(e.id)},children:"delete "})," "]},e.name)}))})},i=function(e){var n=e.newFilter,t=e.setNewFilter;return Object(o.jsxs)("div",{children:["Filter ",Object(o.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})},l=t(6),d=t(4),b=t.n(d),m="http://localhost:3001/api/names",f=function(){return b.a.get(m)},j=function(e){return b.a.post(m,e)},h=function(e){return b.a.delete("".concat(m,"/").concat(e))},w=function(e,n){return b.a.put("".concat(m,"/").concat(e),n)},O=function(e){var n=e.persons,t=e.setPersons,c=e.newName,a=e.setNewName,r=e.newNumber,u=e.setNewNumber,s=e.setModMessage,i=function(e){var o=n.find((function(n){return n.name.toLowerCase()===e.name.toLowerCase()})).id;e=Object(l.a)(Object(l.a)({},e),{},{id:o}),w(o,e).then((function(e){var a=n.map((function(n){return n.id!==o?n:e.data}));t(a),s("'".concat(c,"' has now been updated!")),setTimeout((function(){s(null)}),5e3)})).catch((function(e){s("name '".concat(n.content,"' has been updated")),setTimeout((function(){s(null)}),5e3)}))};return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o={name:c,number:r,id:Math.floor(1e3*Math.random())};if(n.some((function(e){return e.name.toLowerCase()===c.toLowerCase()&&e.number===r})))window.alert(c+" has already been added");else if(n.some((function(e){return e.name.toLowerCase()===c.toLowerCase()&&e.number!==r}))){if(!0!==window.confirm("".concat(c," already exist. Do wish to update the number?")))return null;i(o)}else j(o).then((function(e){console.log(e),t(n.concat(e.data)),s("".concat(c," is now added")),setTimeout((function(){s(null)}),5e3),a(""),u("")})).catch((function(e){s("name '".concat(n.content,"' has already deleted")),setTimeout((function(){s(null)}),5e3)}))},children:["name: ",Object(o.jsx)("input",{value:c,onChange:function(e){console.log(e.target.value),a(e.target.value)}}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:r,onChange:function(e){console.log(e.target.value),u(e.target.value)}})]}),Object(o.jsx)("button",{type:"submit",children:"add"})]})},v=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"error",children:n})},p=function(e){var n=e.messageA;return null===n?null:Object(o.jsx)("div",{className:"update",children:n})},x=(t(38),function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)("new name here.."),l=Object(u.a)(r,2),d=l[0],b=l[1],m=Object(c.useState)("number here"),j=Object(u.a)(m,2),w=j[0],x=j[1],g=Object(c.useState)(""),N=Object(u.a)(g,2),C=N[0],y=N[1],F=Object(c.useState)(null),L=Object(u.a)(F,2),S=L[0],k=L[1],M=Object(c.useState)(null),T=Object(u.a)(M,2),A=T[0],I=T[1];Object(c.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fullifille"),a(e.data)}))}),[]),console.log("Render",t.length,"persons");return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(v,{message:S}),Object(o.jsx)(p,{messageA:A}),Object(o.jsx)(i,{newFilter:C,setNewFilter:y}),Object(o.jsx)("h2",{children:"Add a new"}),Object(o.jsx)(O,{newName:d,setNewName:b,newNumber:w,setNewNumber:x,persons:t,setPersons:a,setModMessage:I}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(s,{persons:t,newFilter:C,setNewFilter:y,removeInformation:function(e){var n=t.find((function(n){return n.id===e}));!0===window.confirm("Are you sure you want to delete ".concat(n.name))&&h(e).then((function(o){var c=t.filter((function(n){return e!==n.id}));a(c),k("name '".concat(n.name,"' was deleted")),setTimeout((function(){k(null)}),5e3)})).catch((function(e){k("name '".concat(t.content,"' has already deleted")),setTimeout((function(){k(null)}),5e3)}))}})]})]})});r.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d8d1a643.chunk.js.map